#{extends 'main.html' /}
#{set title:'Dashboard' /}

#{menu id:"dashboard"/}

#{list items:stations, as:'station'}
<section id="dashboard-box" class="box">
    <div class="content">
        <h1 class="title station-title">
            ${station.name}
        </h1>
        <a href="/" class="icon has-text-primary">
            <i class="fas fa-folder"></i>
        </a>
        <div class="columns">
            <div class="column last-reading-column">
                <p class="secondary-paragraph">${station.name}</p>
            </div>
            <div class="column last-reading-column">
                <p class="secondary-paragraph">Weather</p>
                <p class="reading-paragraph">${station.getCodeDescription(station.getLastReading().code)}</p>
            </div>
            <div class="column last-reading-column">
                <p class="secondary-paragraph">Temp</p>
                <p class="reading-paragraph">${station.getLastReading().temperature} °C</p>
                <p class="reading-paragraph">${station.getLastReading().getTemperatureInFahrenheit()} °F</p>
            </div>
            <div class="column last-reading-column">
                <p class="secondary-paragraph">Wind</p>
                <p class="reading-paragraph">${station.getBeaufortLabel(station.getLastReading().windSpeed)} bft</p>
                <p class="reading-paragraph">${station.getCompassDirection(station.getLastReading().windDirection)}</p>
                <p class="reading-paragraph">${station.getLastReading().getWindChill()}</p>
                </p>
            </div>
            <div class="column last-reading-column">
                <p class="secondary-paragraph">Pressure</p>
                <p class="reading-paragraph">${station.getLastReading().pressure}</p>
            </div>
        </div>
        <table id="reading-list" class="ui fixed table">
            <thead>
            <tr>
                <th>Code</th>
                <th>Temp</th>
                <th>Wind Speed</th>
                <th>Wind Direction</th>
                <th>Pressure</th>
            </tr>
            </thead>
            <tbody>
            #{list items:station.readings, as:'reading'}
            <tr>
                <td>${reading.code}</td>
                <td>${reading.temperature}</td>
                <td>${reading.windSpeed}</td>
                <td>${reading.windDirection}</td>
                <td>${reading.pressure}</td>
            </tr>
            #{/list}
            </tbody>
        </table>
    </div>
    <form action="" method="POST">
        <div class="columns">
            <div class="field column">
                <label class="label">Code</label>
                <div class="control">
                    <input class="input" placeholder="Code" type="text" name="Code">
                </div>
            </div>
            <div class="field column">
                <label class="label">Temperature</label>
                <div class="control">
                    <input class="input" placeholder="Temperature" type="text" name="Temperature">
                </div>
            </div>
            <div class="field column">
                <label class="label">Wind Speed</label>
                <div class="control">
                    <input class="input" placeholder="Wind Speed" type="number" name="Wind Speed">
                </div>
            </div>
            <div class="field column">
                <label class="label">Wind Direction</label>
                <div class="control">
                    <input class="input" placeholder="Duration" type="number" name="Wind Direction">
                </div>
            </div>
            <div class="field column">
                <label class="label">Pressure</label>
                <div class="control">
                    <input class="input" placeholder="Pressure" type="number" name="Pressure">
                </div>
            </div>
        </div>
        <div class="field mt-4">
            <div class="control">
                <button class="button is-info">Submit Report</button>
            </div>
        </div>
    </form>
</section>
#{/list}

#{addStation /}